import{a as H,b as et}from"./chunk-EQ4WYGC6.js";import{a as rt}from"./chunk-D6FPHCFA.js";import{a as c,b as v,c as g,d as tt,f as x,g as L,h as e,i as A,j as S,k as $,l as I,m as b,n as p,o as D,p as q}from"./chunk-SJH6G6HZ.js";var C,W=g(()=>{C=[{path:"/blog",page:"./blog/index.js"},{path:"/blog/:title",page:"./blog/[title].js"},{path:"/",page:"./index.js"},{path:"/sign",page:"./sign.js"}]});var P,B,E,nt,_,F=g(()=>{b();q();({Link:P}=I),B="bg-gray-200 text-gray-900 dark:(bg-gray-900 text-white) px-3 py-2 rounded-md text-sm font-medium",E="text-gray-900 hover:bg-gray-300 hover:text-gray-900 dark:(text-gray-300 hover:bg-gray-700 hover:text-white) px-3 py-2 rounded-md text-sm font-medium",nt="bg-gray-300 text-gray-900 dark:(bg-gray-700 text-white) px-3 py-2 rounded-md text-sm font-medium",_=class extends A{constructor(t){super(t);this.text_switch=".";t.isServer||(this.text_switch=window.__btn_switch)}didMount(){addEventListener("page:end",()=>{this.update(location.pathname)})}onSwitch(){let t=document.documentElement.classList;t&&t.value==="dark"?(document.documentElement.classList.remove("dark"),localStorage.removeItem("theme"),this.text_switch="Light"):(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark"),this.text_switch="Dark"),this.update(location.pathname)}render(t){let n=t||this.props.route.pathname;return n==="/sign"?e("div",null):e("nav",{class:p`bg-white lg:border-b dark:(bg-gray-800 lg:border-gray-900) sticky top-0 z-10`},e("div",{class:p`max-w-7xl mx-auto px-2 sm:px-6 lg:px-8`},e("div",{class:p`relative flex items-center justify-between h-16`},e("div",{class:p`flex-1 flex items-center justify-center sm:items-stretch sm:justify-start`},e("div",{class:p`sm:block sm:ml-6`},e("div",{class:p`flex space-x-4`},e(P,{to:"/",class:p`${n==="/"?B:E}`},"Home"),e(P,{to:"/blog",class:p`${n.startsWith("/blog")?B:E}`},"Blog"),e(P,{to:"/sign",class:p`${E}`},"Sign Form")))),e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0"},e("a",{class:p`${E}`,href:"https://github.com/herudi/maze",target:"_blank"},"Github"),e("button",{style:"width: 80px",onClick:this.onSwitch.bind(this),class:p`${nt}`},this.text_switch)))))}}});function k(i){let t=document.getElementById("loading");t.style.display=i?"block":"none"}function w({Page:i,props:t}){return e($,null,e(S,null,e("html",{lang:"en"}),e("meta",{charset:"utf-8"}),e("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),e("link",{rel:"icon",href:"data:,"}),e("script",{src:"/assets/theme.js"}),e("link",{href:"/assets/loading.css",rel:"stylesheet"})),e(_,c({},t)),e("div",{id:"__MAZE_PAGE__"},e(i,c({},t))),e("div",{id:"loading",class:"center-div-loading",style:"display: none;"},e("div",{class:"linear-progress-material"},e("div",{class:"bar bar1"}),e("div",{class:"bar bar2"}))))}var T,M=g(()=>{b();F();w.event={onStart(i){i.isFirst||(T=setTimeout(()=>{k(!0)},300))},onEnd({isFirst:i}){T&&clearTimeout(T),k(!1),i||(dispatchEvent(new Event("page:end")),window.scrollTo(0,0))},onError(i){k(!1),console.error(i)}}});function j({Page:i,initData:t,route:n,isServer:o}){return e(w,{Page:i,props:v(c({},t),{route:n,isServer:o})})}var m,N=g(()=>{b();M();j.initProps=w.initProps;j.event=w.event||{};m=j});var z,U=g(()=>{z="production"});var G,O=g(()=>{U();G={cache_control:"public, max-age=7200, immutable",etag:z==="production"}});var V,Z=g(()=>{V={darkMode:"class"}});function J(){D(V)}var K=g(()=>{q();Z()});function it(i,t,n){let o=n.groups||{};if(!t)return o;if(i.indexOf("*")!==-1){n.shift();let d=n.filter(a=>a!==void 0).filter(a=>a.startsWith("/")).join("").split("/");d.shift();let s=v(c({},o),{wild:d.filter(a=>a!=="")});if(i==="*"||i.indexOf("/*")!==-1)return s;let r=i.split("/").find(a=>a.startsWith(":")&&a.endsWith("*"));return r&&(r=r.slice(1,-1),s[r]=[s[r]].concat(s.wild).filter(a=>a!==""),delete s.wild),s}return o}function Q(i){try{return decodeURI(i)}catch(t){return i}}var R,X=g(()=>{rt();R=class{constructor(t){this.routes=[];this.is_reload=!1;this.ErrorPage=t}buildPages(t,n,o){if(this.is_reload=n.length!==0,n.length===0)return o;let d=o,s=!1;for(let r=0;r<n.length;r++){let a=n[r];t.startsWith(a)&&(d=o.filter(l=>l.path.startsWith(a)),s=!0)}return s||(d=o.filter(r=>!n.some(a=>r.path.startsWith(a)))),d}add(t,n){let o=!1,d=t.replace(/\/$/,"").replace(/:(\w+)(\?)?(\.)?/g,"$2(?<$1>[^/]+)$2$3").replace(/(\/?)\*/g,(r,a)=>(o=!0,`(${a}.*)?`)).replace(/\.(?=[\w(])/,"\\."),s=new RegExp(`^${d}/*$`);return this.routes.push({path:t,fn:n,regex:s,wild:o}),this}find(t){let n,o={},d=0,s,r=this.routes,a=r.length;for(t=Q(t);d<a;){if(s=r[d],s.regex.test(t)){let l=s.regex.exec(t);n=s.fn,o=it(s.path,s.wild,l);break}d++}return{fn:n,params:o}}handle(){let{pathname:t,search:n,origin:o}=window.location;if(this.current===t+n)return;let{fn:d,params:s}=this.find(t),r=this.ErrorPage,a=this.is_reload;this.current=t+n;let l={};if(l.pathname=t,l.url=this.current,l.path=t,l.isServer=!1,l.getBaseUrl=()=>o,l.params=s,l.fetchApi=(f,h)=>x(this,null,function*(){try{let u=yield fetch(o+f,h);if(!u.ok)throw u;return{data:yield u.json(),error:void 0}}catch(u){let y=yield u.json();return y.message=Q(y.message),{data:void 0,error:y}}}),l.render=(f,h)=>{L(f,h?document.getElementById(h):document.body)},!d)return a?location.reload():l.render(e(r,{message:"Not Found",status:404}));d(l)}resolve(){let t=()=>this.handle();t(),window.addEventListener("pushstate",n=>{n.preventDefault(),t()}),window.addEventListener("replacestate",n=>{n.preventDefault(),t()}),window.addEventListener("popstate",()=>{t()})}}});var at=tt(Y=>{b();W();N();O();K();et();X();function st(i){return x(this,null,function*(){return(yield import(i)).default})}window.addEventListener("load",()=>{J();let i=!0,t=document.getElementById("__INIT_DATA__");t&&(t=JSON.parse(t.textContent||"{}"));let n=new R(H),o=n.buildPages(location.pathname,G.zones||[],C);for(let d=0;d<o.length;d++){let s=o[d];n.add(s.path,r=>x(Y,null,function*(){r.isFirst=i;try{let a={};i||(a=m.initProps?yield m.initProps(r):{}),m.event.onStart!==void 0&&(yield m.event.onStart(r));let l=typeof s.page=="string"?yield st(s.page):s.page,f=i?t||{}:l.initProps?yield l.initProps(r):{},h=()=>{r.render(e(m,{Page:l,initData:c(c({},f),a),route:{pathname:r.pathname,url:r.url,path:s.path,params:r.params},isServer:!1}))};if(i)h();else{let u=c(c({},f),a);r.render(e(l,v(c({},u),{route:{pathname:r.pathname,url:r.url,path:s.path,params:r.params},isServer:!1})),"__MAZE_PAGE__")}m.event.onEnd!==void 0&&m.event.onEnd(r)}catch(a){m.event.onError!==void 0&&m.event.onError(a,r)}i=!1}))}n.resolve()})});export default at();
