import{a as P}from"./chunk-PV3TOJ4E.js";import{a as E,b as r,c as _,d as k,e as j,f as l,g as R}from"./chunk-I4SUQYDM.js";var w=[{path:"/blog",page:"./blog/index.js"},{path:"/blog/:title",page:"./blog/[title].js"},{path:"/",page:"./index.js"},{path:"/sign",page:"./sign.js"}],L="1647393009396";var{Link:v}=j,$="bg-gray-200 text-gray-900 dark:(bg-gray-900 text-white) px-3 py-2 rounded-md text-sm font-medium",f="text-gray-900 hover:bg-gray-300 hover:text-gray-900 dark:(text-gray-300 hover:bg-gray-700 hover:text-white) px-3 py-2 rounded-md text-sm font-medium",D="bg-gray-300 text-gray-900 dark:(bg-gray-700 text-white) px-3 py-2 rounded-md text-sm font-medium",h=class extends _{constructor(){super(...arguments);this.text_switch=window.__btn_switch||"."}didMount(){addEventListener("page:end",()=>{this.update(location.pathname)})}onSwitch(){let t=document.documentElement.classList;t&&t.value==="dark"?(document.documentElement.classList.remove("dark"),localStorage.removeItem("theme"),this.text_switch="Light"):(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark"),this.text_switch="Dark"),this.update(location.pathname)}render(t){let i=t||this.props.route.pathname;return i==="/sign"?r("div",null):r("nav",{class:l`bg-white lg:border-b dark:(bg-gray-800 lg:border-gray-900) sticky top-0 z-10`},r("div",{class:l`max-w-7xl mx-auto px-2 sm:px-6 lg:px-8`},r("div",{class:l`relative flex items-center justify-between h-16`},r("div",{class:l`flex-1 flex items-center justify-center sm:items-stretch sm:justify-start`},r("div",{class:l`sm:block sm:ml-6`},r("div",{class:l`flex space-x-4`},r(v,{to:"/",class:l`${i==="/"?$:f}`},"Home"),r(v,{to:"/blog",class:l`${i.startsWith("/blog")?$:f}`},"Blog"),r(v,{to:"/sign",class:l`${f}`},"Sign Form")))),r("div",{class:"absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0"},r("a",{class:l`${f}`,href:"https://github.com/herudi/maze",target:"_blank"},"Github"),r("button",{style:"width: 80px",onClick:this.onSwitch.bind(this),class:l`${D}`},this.text_switch)))))}};function g({Page:n,props:t}){return r("div",null,r(k,null,r("html",{lang:"en"}),r("meta",{charset:"utf-8"}),r("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),r("link",{rel:"icon",href:"data:,"}),r("script",{src:"/assets/theme.js"}),r("script",{src:"https://cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"}),r("link",{href:"https://cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.css",rel:"stylesheet"})),r(h,{route:t.route}),r("div",{id:"__MY_PAGE__"},r(n,{...t})))}var y;g.event={onStart(n){n.NProgress=window.NProgress,n.isFirst||(y=setTimeout(()=>{n.NProgress.start()},300))},onEnd({isFirst:n,NProgress:t}){y&&clearTimeout(y),t.done(),n||(dispatchEvent(new Event("page:end")),window.scrollTo(0,0))},onError(n){console.error(n)}};function x({Page:n,initData:t,route:i,isServer:o}){return r(g,{Page:n,props:{...t,route:i,isServer:o}})}x.initProps=g.initProps;x.event=g.event||{};var p=x;var S={darkMode:"class"},A=({pathname:n})=>{if(n.startsWith("/"))return"__MY_PAGE__"};function T(n,t,i){let o=i.groups||{};if(!t)return o;if(n.indexOf("*")!==-1){i.shift();let d=i.filter(a=>a!==void 0).filter(a=>a.startsWith("/")).join("").split("/");d.shift();let e={...o,wild:d.filter(a=>a!=="")};if(n==="*"||n.indexOf("/*")!==-1)return e;let s=n.split("/").find(a=>a.startsWith(":")&&a.endsWith("*"));return s&&(s=s.slice(1,-1),e[s]=[e[s]].concat(e.wild).filter(a=>a!==""),delete e.wild),e}return o}function q(n){try{return decodeURI(n)}catch{return n}}var b=class{constructor(){this.routes=[]}add(t,i){let o=!1,d=t.replace(/\/$/,"").replace(/:(\w+)(\?)?(\.)?/g,"$2(?<$1>[^/]+)$2$3").replace(/(\/?)\*/g,(s,a)=>(o=!0,`(${a}.*)?`)).replace(/\.(?=[\w(])/,"\\."),e=new RegExp(`^${d}/*$`);return this.routes.push({path:t,fn:i,regex:e,wild:o}),this}find(t){let i,o={},d=0,e,s=this.routes,a=s.length;for(t=q(t);d<a;){if(e=s[d],e.regex.test(t)){let c=e.regex.exec(t);i=e.fn,o=T(e.path,e.wild,c);break}d++}return{fn:i,params:o}}handle(){let{pathname:t,search:i,origin:o}=window.location;if(this.current===t+i)return;let{fn:d,params:e}=this.find(t);this.current=t+i;let s={};if(s.pathname=t,s.url=this.current,s.path=t,s.isServer=!1,s.getBaseUrl=()=>o,s.params=e,s.fetchApi=async(a,c)=>{try{let m=await fetch(o+a,c);if(!m.ok)throw m;return{data:await m.json(),error:void 0}}catch(m){let u=await m.json();return u.message=q(u.message),{data:void 0,error:u}}},s.render=(a,c)=>{E(a,c?document.getElementById(c):document.body)},!d)return s.render(r(P,{message:"Not Found",status:404}));d(s)}resolve(){let t=()=>this.handle();t(),window.addEventListener("pushstate",i=>{i.preventDefault(),t()}),window.addEventListener("replacestate",i=>{i.preventDefault(),t()}),window.addEventListener("popstate",()=>{t()})}};async function N(n){return(await import(n+"?v="+L)).default}window.addEventListener("load",()=>{R(S);let n=!0,t=document.getElementById("__INIT_DATA__");t&&(t=JSON.parse(t.textContent||"{}"));let i=new b;for(let o=0;o<w.length;o++){let d=w[o];i.add(d.path,async e=>{e.isFirst=n;try{let s=A(e);if(!s&&!n)return window.location.href=e.url;let a={};n||(a=p.initProps?await p.initProps(e):{}),p.event.onStart!==void 0&&await p.event.onStart(e);let c=typeof d.page=="string"?await N(d.page):d.page,m=n?t||{}:c.initProps?await c.initProps(e):{},u=()=>{e.render(r(p,{Page:c,initData:{...m,...a},route:{pathname:e.pathname,url:e.url,path:d.path,params:e.params},isServer:!1}))};if(n)u();else{let I={...m,...a};e.render(r(c,{...I,route:{pathname:e.pathname,url:e.url,path:d.path,params:e.params},isServer:!1}),s)}p.event.onEnd!==void 0&&p.event.onEnd(e)}catch(s){p.event.onError!==void 0&&p.event.onError(s,e)}n=!1})}i.resolve()});export{b as default};
