import{a as $}from"./chunk-UCSESBT4.js";import{a as l,b as v,c as h,d as R,e,f as j,g as L,h as I,i as c,j as S}from"./chunk-SWXOK75I.js";var x=[{path:"/blog",page:"./blog/index.js"},{path:"/blog/:title",page:"./blog/[title].js"},{path:"/",page:"./index.js"},{path:"/sign",page:"./sign.js"}];var{Link:b}=I,D="bg-gray-200 text-gray-900 dark:(bg-gray-900 text-white) px-3 py-2 rounded-md text-sm font-medium",w="text-gray-900 hover:bg-gray-300 hover:text-gray-900 dark:(text-gray-300 hover:bg-gray-700 hover:text-white) px-3 py-2 rounded-md text-sm font-medium",U="bg-gray-300 text-gray-900 dark:(bg-gray-700 text-white) px-3 py-2 rounded-md text-sm font-medium",y=class extends j{constructor(t){super(t);this.text_switch=".";t.isServer||(this.text_switch=window.__btn_switch)}didMount(){addEventListener("page:end",()=>{this.update(location.pathname)})}onSwitch(){let t=document.documentElement.classList;t&&t.value==="dark"?(document.documentElement.classList.remove("dark"),localStorage.removeItem("theme"),this.text_switch="Light"):(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark"),this.text_switch="Dark"),this.update(location.pathname)}render(t){let i=t||this.props.route.pathname;return i==="/sign"?e("div",null):e("nav",{class:c`bg-white lg:border-b dark:(bg-gray-800 lg:border-gray-900) sticky top-0 z-10`},e("div",{class:c`max-w-7xl mx-auto px-2 sm:px-6 lg:px-8`},e("div",{class:c`relative flex items-center justify-between h-16`},e("div",{class:c`flex-1 flex items-center justify-center sm:items-stretch sm:justify-start`},e("div",{class:c`sm:block sm:ml-6`},e("div",{class:c`flex space-x-4`},e(b,{to:"/",class:c`${i==="/"?D:w}`},"Home"),e(b,{to:"/blog",class:c`${i.startsWith("/blog")?D:w}`},"Blog"),e(b,{to:"/sign",class:c`${w}`},"Sign Form")))),e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0"},e("a",{class:c`${w}`,href:"https://github.com/herudi/maze",target:"_blank"},"Github"),e("button",{style:"width: 80px",onClick:this.onSwitch.bind(this),class:c`${U}`},this.text_switch)))))}};function E(n){let t=document.getElementById("loading");t.style.display=n?"block":"none"}function f({Page:n,props:t}){return e("div",null,e(L,null,e("html",{lang:"en"}),e("meta",{charset:"utf-8"}),e("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),e("link",{rel:"icon",href:"data:,"}),e("script",{src:"/assets/theme.js"}),e("link",{href:"/assets/loading.css",rel:"stylesheet"})),e("div",{id:"loading",class:"center-div-loading",style:"display: none;"},e("div",{class:"linear-progress-material"},e("div",{class:"bar bar1"}),e("div",{class:"bar bar2"}))),e(y,l({},t)),e("div",{id:"__MY_PAGE__"},e(n,l({},t))))}var _;f.event={onStart(n){n.isFirst||(_=setTimeout(()=>{E(!0)},300))},onEnd({isFirst:n}){_&&clearTimeout(_),E(!1),n||(dispatchEvent(new Event("page:end")),window.scrollTo(0,0))},onError(n){E(!1),console.error(n)}};function k({Page:n,initData:t,route:i,isServer:o}){return e(f,{Page:n,props:v(l({},t),{route:i,isServer:o})})}k.initProps=f.initProps;k.event=f.event||{};var m=k;var A={darkMode:"class"},q=({pathname:n})=>{if(n.startsWith("/"))return"__MY_PAGE__"};var T="1647761247140";function W(n,t,i){let o=i.groups||{};if(!t)return o;if(n.indexOf("*")!==-1){i.shift();let d=i.filter(a=>a!==void 0).filter(a=>a.startsWith("/")).join("").split("/");d.shift();let r=v(l({},o),{wild:d.filter(a=>a!=="")});if(n==="*"||n.indexOf("/*")!==-1)return r;let s=n.split("/").find(a=>a.startsWith(":")&&a.endsWith("*"));return s&&(s=s.slice(1,-1),r[s]=[r[s]].concat(r.wild).filter(a=>a!==""),delete r.wild),r}return o}function B(n){try{return decodeURI(n)}catch(t){return n}}var P=class{constructor(){this.routes=[]}add(t,i){let o=!1,d=t.replace(/\/$/,"").replace(/:(\w+)(\?)?(\.)?/g,"$2(?<$1>[^/]+)$2$3").replace(/(\/?)\*/g,(s,a)=>(o=!0,`(${a}.*)?`)).replace(/\.(?=[\w(])/,"\\."),r=new RegExp(`^${d}/*$`);return this.routes.push({path:t,fn:i,regex:r,wild:o}),this}find(t){let i,o={},d=0,r,s=this.routes,a=s.length;for(t=B(t);d<a;){if(r=s[d],r.regex.test(t)){let p=r.regex.exec(t);i=r.fn,o=W(r.path,r.wild,p);break}d++}return{fn:i,params:o}}handle(){let{pathname:t,search:i,origin:o}=window.location;if(this.current===t+i)return;let{fn:d,params:r}=this.find(t);this.current=t+i;let s={};if(s.pathname=t,s.url=this.current,s.path=t,s.isServer=!1,s.getBaseUrl=()=>o,s.params=r,s.fetchApi=(a,p)=>h(this,null,function*(){try{let u=yield fetch(o+a,p);if(!u.ok)throw u;return{data:yield u.json(),error:void 0}}catch(u){let g=yield u.json();return g.message=B(g.message),{data:void 0,error:g}}}),s.render=(a,p)=>{R(a,p?document.getElementById(p):document.body)},!d)return s.render(e($,{message:"Not Found",status:404}));d(s)}resolve(){let t=()=>this.handle();t(),window.addEventListener("pushstate",i=>{i.preventDefault(),t()}),window.addEventListener("replacestate",i=>{i.preventDefault(),t()}),window.addEventListener("popstate",()=>{t()})}};function C(n){return h(this,null,function*(){return(yield import(n+"?v="+T)).default})}window.addEventListener("load",()=>{S(A);let n=!0,t=document.getElementById("__INIT_DATA__");t&&(t=JSON.parse(t.textContent||"{}"));let i=new P;for(let o=0;o<x.length;o++){let d=x[o];i.add(d.path,r=>h(void 0,null,function*(){r.isFirst=n;try{let s=q(r);if(!s&&!n)return window.location.href=r.url;let a={};n||(a=m.initProps?yield m.initProps(r):{}),m.event.onStart!==void 0&&(yield m.event.onStart(r));let p=typeof d.page=="string"?yield C(d.page):d.page,u=n?t||{}:p.initProps?yield p.initProps(r):{},g=()=>{r.render(e(m,{Page:p,initData:l(l({},u),a),route:{pathname:r.pathname,url:r.url,path:d.path,params:r.params},isServer:!1}))};if(n)g();else{let H=l(l({},u),a);r.render(e(p,v(l({},H),{route:{pathname:r.pathname,url:r.url,path:d.path,params:r.params},isServer:!1})),s)}m.event.onEnd!==void 0&&m.event.onEnd(r)}catch(s){m.event.onError!==void 0&&m.event.onError(s,r)}n=!1}))}i.resolve()});export{P as default};
